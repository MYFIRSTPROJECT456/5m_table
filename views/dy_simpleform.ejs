<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8">
  <![endif]-->
  <!--[if !IE]>
  <!-->
  <html lang="en">
    <!--
    <![endif]--><%- include lib/dy/apicalh01.ejs %><% var pagename="Dynamic" %>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style type="text/css">

        td.details-control {
            /* background: url('assets/img/plus.png') no-repeat center center; */
            cursor: pointer;
        }
        tr.shown td.details-control {
            /* background: url('assets/img/minus.png') no-repeat center center; */
        }
  input,
  textarea,
  select,
  label,
  .multipleSelect,
  .selectpicker,
  .datepicker {
    margin: 0 0 10px 0;
  }
</style>

    <script type="text/javascript">
  var Screenfields = [];
  var currentcount = 0;
  var selectedIds = [];
  var groupcount = 1;
  var totalcount='';
  var fields =<%- fields %>;

  var dataSet = [
    [ "Tiger Nixon", "System Architect", "Edinburgh", "5421", "2011/04/25", "$320,800" ],
    [ "Garrett Winters", "Accountant", "Tokyo", "8422", "2011/07/25", "$170,750" ],
    [ "Ashton Cox", "Junior Technical Author", "San Francisco", "1562", "2009/01/12", "$86,000" ],
    [ "Cedric Kelly", "Senior Javascript Developer", "Edinburgh", "6224", "2012/03/29", "$433,060" ],
    [ "Airi Satou", "Accountant", "Tokyo", "5407", "2008/11/28", "$162,700" ],
    [ "Brielle Williamson", "Integration Specialist", "New York", "4804", "2012/12/02", "$372,000" ],
    [ "Herrod Chandler", "Sales Assistant", "San Francisco", "9608", "2012/08/06", "$137,500" ],
    [ "Rhona Davidson", "Integration Specialist", "Tokyo", "6200", "2010/10/14", "$327,900" ],
    [ "Colleen Hurst", "Javascript Developer", "San Francisco", "2360", "2009/09/15", "$205,500" ],
    [ "Sonya Frost", "Software Engineer", "Edinburgh", "1667", "2008/12/13", "$103,600" ],
    [ "Jena Gaines", "Office Manager", "London", "3814", "2008/12/19", "$90,560" ],
    [ "Quinn Flynn", "Support Lead", "Edinburgh", "9497", "2013/03/03", "$342,000" ],
    [ "Charde Marshall", "Regional Director", "San Francisco", "6741", "2008/10/16", "$470,600" ],
    [ "Haley Kennedy", "Senior Marketing Designer", "London", "3597", "2012/12/18", "$313,500" ],
    [ "Tatyana Fitzpatrick", "Regional Director", "London", "1965", "2010/03/17", "$385,750" ],
    [ "Michael Silva", "Marketing Designer", "London", "1581", "2012/11/27", "$198,500" ],
    [ "Paul Byrd", "Chief Financial Officer (CFO)", "New York", "3059", "2010/06/09", "$725,000" ],
    [ "Gloria Little", "Systems Administrator", "New York", "1721", "2009/04/10", "$237,500" ],
    [ "Bradley Greer", "Software Engineer", "London", "2558", "2012/10/13", "$132,000" ],
    [ "Dai Rios", "Personnel Lead", "Edinburgh", "2290", "2012/09/26", "$217,500" ],
    [ "Jenette Caldwell", "Development Lead", "New York", "1937", "2011/09/03", "$345,000" ],
    [ "Yuri Berry", "Chief Marketing Officer (CMO)", "New York", "6154", "2009/06/25", "$675,000" ],
    [ "Caesar Vance", "Pre-Sales Support", "New York", "8330", "2011/12/12", "$106,450" ],
    [ "Doris Wilder", "Sales Assistant", "Sidney", "3023", "2010/09/20", "$85,600" ],
    [ "Angelica Ramos", "Chief Executive Officer (CEO)", "London", "5797", "2009/10/09", "$1,200,000" ],
    [ "Gavin Joyce", "Developer", "Edinburgh", "8822", "2010/12/22", "$92,575" ],
    [ "Jennifer Chang", "Regional Director", "Singapore", "9239", "2010/11/14", "$357,650" ],
    [ "Brenden Wagner", "Software Engineer", "San Francisco", "1314", "2011/06/07", "$206,850" ],
    [ "Fiona Green", "Chief Operating Officer (COO)", "San Francisco", "2947", "2010/03/11", "$850,000" ],
    [ "Shou Itou", "Regional Marketing", "Tokyo", "8899", "2011/08/14", "$163,000" ],
    [ "Michelle House", "Integration Specialist", "Sidney", "2769", "2011/06/02", "$95,400" ],
    [ "Suki Burks", "Developer", "London", "6832", "2009/10/22", "$114,500" ],
    [ "Prescott Bartlett", "Technical Author", "London", "3606", "2011/05/07", "$145,000" ],
    [ "Gavin Cortez", "Team Leader", "San Francisco", "2860", "2008/10/26", "$235,500" ],
    [ "Martena Mccray", "Post-Sales support", "Edinburgh", "8240", "2011/03/09", "$324,050" ],
    [ "Unity Butler", "Marketing Designer", "San Francisco", "5384", "2009/12/09", "$85,675" ]
];

    </script>
    <body>
      <!-- begin #page-loader -->
      <div id="page-loader" class="fade in">
        <span class="spinner"></span>
      </div>
      <!-- end #page-loader -->
      <!-- begin #page-container -->
      <div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
        <div id="sidebar" class="sidebar">
          <!-- begin sidebar scrollbar -->
          <div data-scrollbar="true" data-height="100%">
            <!-- begin sidebar user -->
            <ul class="nav">
              <li class="nav-profile">
                <div class="image">
                  <a href="javascript:;">
                    <img src="" alt="" />
                  </a>
                </div>
                <div class="info">
                  <small>Admin</small>
                </div>
              </li>
              <li>
                <a href="javascript:menuclick(1);">
                  <span>Account</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(2);">
                  <span>Account OP Balance</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(3);">
                  <span>Account Group</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(4);">
                  <span>Bank</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(5);">
                  <span>Bank transaction</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(6);">
                  <span>Branch</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(7);">
                  <span>Cash transaction</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(8);">
                  <span>Customer</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(9);">
                  <span>Financial year</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(10);">
                  <span>JV ?</span>
                </a>
              </li>
              <li>
                <a href="javascript:menuclick(11);">
                  <span>Sales order</span>
                </a>
              </li>
            </ul>
            <form id="lform" style="display: none;">
              <div class="form-group">
                <input type="hidden" id="lval" name="lval" />
              </div>
            </form>
            <!-- end sidebar user -->
          </div>
          <!-- end sidebar scrollbar -->
        </div>
        <div class="sidebar-bg"></div>
        <!-- end #sidebar -->
        <!-- begin #content -->
        <div id="content" class="content">
          <!-- begin row -->
          <div class="row">
            <!-- begin col-12 -->
            <div class="col-md-12">
              <!-- begin panel -->
              <div class="panel panel-inverse">
                <div class="panel-heading  ">
                  <div class="panel-heading-btn element">
                    <a href="javascript:onValidate();" class="btn btn-xl btn-icon btn-circle btn-success">
                      <i class="fa fa-save" ></i>
                    </a>
                    <a href="javascript:print();" class="btn btn-xl btn-icon btn-circle btn-success" id="print">
                      <i class="fa fa-print" ></i>
                    </a>
                    <a href="javascript:approve();" class="btn btn-xl btn-icon btn-circle btn-success">
                      <i class="fa fa-refresh" ></i>
                    </a>
                    <a href="javascript:reset();" class="btn btn-xl btn-icon btn-circle btn-success">
                      <i class="fa fa-remove" ></i>
                    </a>
                  </div>
                  <h3 class="panel-title">Sales order</h3>
                </div>
                <div class="panel-body"><%- include lib/dy/apicaldyor01.ejs %>
                </div>
              </div>
              <!-- end panel -->
            </div>
            <!-- end col-12 -->
          </div>
          <!-- end row -->
          <div class="modal fade" id="modal-dialog3">
            <div class="modal-dialog modal-lg">">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                  <h4 class="modal-title">Heading</h4>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <form action="/" method="POST" id="forms" data-parsley-validate="true">
                      <table><%

                  if ('lineitems' in fields && 'deliverySchedule' in fields.lineitems[0]){ %>
                        <table class="table table-striped table-bordered">
                          <thead>
                            <tr>
                              <th></th><%

                      for (var key in fields.lineitems[0].deliverySchedule[0]) {
                      var value =fields.lineitems[0].deliverySchedule[0][key];
                      if(value.constructor === Array){}else{
                      if (value.visibility == 1) {%>
                              <th><%= key %>
                              </th><%  }}} %>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td class="details-control"></td><%
                        for (var key in fields.lineitems[0].deliverySchedule[0]) {
                        var field = fields.lineitems[0].deliverySchedule[0][key];
                        if(field.constructor === Array){ 
                        }else{
                          
                          if (field.visibility == 1) {%>
                              <td><%- include lib/dy/paint_nolabel.ejs %>
                              </td><%  }}} %>
                            </tr>
                          </tbody>
                        </table>
                      </div><%}%>
                    </table>
                  </form>
                </div>
`
        
                <div class="modal-footer">
                  <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Close</a>
                  <a href="javascript:onValidate();" class="btn btn-sm btn-success" data-dismiss="modal">Save</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end #content --><%- include lib/dy/apicalf01.ejs %>
      <!-- begin scroll to top btn -->
      <a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top">
        <i class="fa fa-angle-up"></i>
      </a>
      <!-- end scroll to top btn -->
    </div>
    <!-- end page container --><%- include lib/dy/apicalf02.ejs %>
    <script>
  $(document).ready(function() {
    App.init();
    $(".multipleSelect").select2({});
    $(".datepicker").datepicker({ autoclose: true });


  var table = $('#example').DataTable( { 
    paging: false,
      responsive: false,
      searching: false,
      "sScrollX": "100%",
"bScrollCollapse": true,
                        "select": {
                            selector:'td:not(:first-child)',
                            style:    'os'
                        },
                        "order": [[1, 'asc']]
                    });


                    // Add event listener for opening and closing details
                    $('#example').on('click', 'td.details-control', function () {
                    
                        alert("td clicked 111 ");
                        var tr = $(this).closest('tr');
                        var row = table.row( tr );
                
                        alert("td clicked ");
                        if ( row.child.isShown() ) {
                            // This row is already open - close it
                            row.child.hide();
                            tr.removeClass('shown');
                        }
                        else {
                            // Open this row
                            row.child(format(row.data())).show();
                            tr.addClass('shown');
                        }
                    });
            
                });  
                
               
               

               
                function format ( d ) {
                    // `d` is the original data object for the row

                    alert("function called ");

                    var customers = new Array();
                    customers.push(["Customer Id", "Name", "Country"]);
                    customers.push([1, "John Hammond", "United States"]);
                    customers.push([2, "Mudassar Khan", "India"]);
                    customers.push([3, "Suzanne Mathews", "France"]);
                    customers.push([4, "Robert Schidner", "Russia"]);
                 
                    //Create a HTML Table element.
                    var table = document.createElement("table");
                    table.setAttribute("id", "table");
                    table.setAttribute("class", "table table-striped");
                    // table = document.getElementById('table').className = 'table table-striped';
                    //  $("#table").addClass("table table-striped");
                    table.border = "1";
                 
                    //Get the count of columns.
                    var columnCount = customers[0].length;
                 
                    //Add the header row.
                    var row = table.insertRow(-1);
                    for (var i = 0; i < columnCount; i++) {
                        var headerCell = document.createElement("TH");
                        headerCell.innerHTML = customers[0][i];
                        row.appendChild(headerCell);
                    }
                 
                    //Add the data rows.
                    for (var i = 1; i < customers.length; i++) {
                        row = table.insertRow(-1);
                        
                        for (var j = 0; j < columnCount; j++) {
                            var cell = row.insertCell();
                            var input = document.createElement('input');
                            input.setAttribute("type", "text");
                            input.setAttribute("id", "inpudata");
                            
                            input.innerHTML = "";
                            cell.appendChild(input);
                           
                            input.setAttribute('value', customers[i][j]);
                            
                        }
                    }

                    return table;
                }
            // Add event listener for opening and closing details

            $('select').each(
              function(index) {
                var input = $(this);
                var api = input.attr('api');
                // alert('Api: ' + input.attr('api'));
                $.ajax({
                  type: "GET",
                  url: "" + api,
                  timeout: 6000,
                  contentType: 'application/json',
                  success: function(data) {

                    helpers.buildDropdown(
                      JSON.parse(JSON.stringify(data)),
                      input,
                      'Select an option'
                      );
                  },
                  error: function(textStatus, errorThrown) {
                //    alert(textStatus + "");
              }
            });

          });
        
    </script>
    <script type="text/javascript">

          function menuclick(id) {
            document.getElementById('lval').value = id;
            var form = $('#lform');
            form.attr('action', '/transaction');
            form.attr('method', 'POST');
            form.submit();
          }

          function showmodal(key){
            totalcount =key;
            alert(totalcount);
        //  console.log("Is it undefined",fields);
         // alert(fields.length +"");
         $('#modal-dialog3').modal('show');
       }

     </script>
     <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  </body>
</html>
